(function(C){var y=window.AmazonUIPageJS||window.P,ta=y._namespace||y.attributeErrors,f=ta?ta("DetailPageImageBlockAssets",""):y;f.guardFatal?f.guardFatal(C)(f,window):f.execute(function(){C(f,window)})})(function(C,y,ta){C.register("postMetric",function(){return{postCountMetric:function(f){if("undefined"!==typeof f){var l=y.ue;if(l){var m=l.count(f)||0;l.count(f,m+1)}}},postTimeMetric:function(f,l){if("undefined"!==typeof f&&"undefined"!==typeof l){var m=y.ue;m&&m.count(f,l)}}}});"use strict";C.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});C.register("postEarlyMetric",function(){return null});"use strict";C.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(f,l,m,d){f=f.extend(!0,{},m,d);var g=new l(f);C.register("ImageBlockAPI",function(){return g.api});return g});"use strict";C.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(f,l,m){f=m.airyConfig;f.jsUrl&&C.load.js(f.jsUrl);f.cssUrl&&C.load.css(f.cssUrl)});"use strict";
C.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(f,l,m,d,g,N){var v={};return function(f){var k=this;k.dispatch=function(d,k){var f=v[d];g.isDefined(f)&&l.each(f,function(d,e){e.call(y,k)})};k.register=function(d,k){g.isDefined(v[d])||(v[d]=[]);"function"===typeof k&&v[d].push(k)};k.model=new m(f,k);k.view=new d(f,k,k.model);k.api=new N(f,k,k.model);k.init=function(){k.model.init();k.view.init()};k.init()}});"use strict";
C.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(f,l,m){function d(d,e,g,b,r){m.isDefined(d)&&(K.type=d);m.isDefined(e)&&(K.index=e);m.isDefined(g)&&(K.thumbnailIndex=g);m.isDefined(b)&&(K.variant=b);m.isDefined(r)&&(K.color=r)}function g(e){d("image",0,0,"MAIN",e||k.landingAsinColor||k.defaultColor)}function N(e){e=e.data;D=f.copy(K);d(e.type,e.index,e.thumbnailIndex,e.variant,e.color)}function v(d){N(d);d=f.copy(d);d.data=f.copy(K);e.dispatch("updateView",d)}function n(){D=
f.copy(K);g(K.color)}var k,e,K={},D={},J,F;return function(d,l){e=l;k=d;e.register("updateSelection",v);e.register("updateModel",N);e.register("resetModel",n);this.init=function(){g()};this.getCurrentItem=function(){return f.copy(K)};this.getPreviousItem=function(){return f.copy(D)};this.setCurrentEvent=function(d){J=d};this.getCurrentEvent=function(){return J};this.setImmersiveViewModalInstance=function(d){F=d};this.getImmersiveViewModalInstance=function(){return F}}});"use strict";C.when("ImageBlockBTF",
"postMetric").execute(function(f,l){function m(d,f,l,m,k){function e(c){"click"===c.type&&m.postCountMetric("thumbClick");"click"===c.type&&E.overrideAltImageClickAction?w.dispatch("thumbActionClick",c):w.dispatch("updateSelection",c)}function K(c){E.useClickZoom||w.dispatch("imageClick",c)}function D(c){E.useClickZoom||w.dispatch("imageHover",c)}function J(c){w.dispatch("button360Click",c)}function F(c){!l.isDefined(c)||"swatchClick"!==c.type&&"updatedData"!==c.type?(r.update(c),"swatchHover"!==
c.type&&L.getPreviousItem().thumbnailIndex!==c.data.thumbnailIndex&&m.postCountMetric(c.data.type+"ThumbnailSelected"),d.trigger("image-block-thumbnail-selected",c.data)):r.render(c.data.color,!1,c.onload)}function A(c){w.dispatch("resize",c)}function H(c){l.selectThumbnail(c,x)}function M(c){var d=c.data,b;d&&"ingress"!==d.type&&"click"===c.type&&(b=c);return b}function b(c){var d=L.getCurrentItem(),b={type:"click"};b.$declarativeParent=c;b.data=d;return b}var r,E,w,L,x;return function(c,l,q){r=
this;E=c;w=l;L=q;x=f("#imageBlock #altImages ul");var m=f("#imageBlock .canvas"),n=f("#main-image-container"),a;r.subViews=[];for(l=0;l<k.length;l++)r.subViews.push(new k[l](c,q,r,w));r.render=function(c,h,d){var G=0;x.find(".item").remove();c=c||L.getCurrentItem().color;f.each(r.subViews,function(a,b){G=b.render(c,G,m,x,n,h,d)||G});var I=x.find(".a-button-selected").closest(".a-declarative");a=b(I)};r.init=function(){x=f("#imageBlock #altImages ul");var c=x.find(".a-button-selected").closest(".a-declarative"),
a=c.data("action"),c=c.data(a)||{};c.color=E.landingAsinColor||E.defaultColor;w.dispatch("updateModel",{data:c});r.render(c.color,!0);E.isDebug&&y.console&&console.log(E);w.register("updateView",F);w.register("selectThumbnail",H);"function"===typeof y.markFeatureInteractive&&y.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["click","hover"]},{name:"thumbnail",events:["click","hover"]}]});E.disableHoverOnAltImages||d.declarative("thumb-action",["mouseenter",
"mouseleave"],e);d.declarative("thumb-action",["click"],e);d.declarative("main-image-click",["click"],K);d.declarative("main-image-click",["mouseenter","mouseleave"],D);d.declarative("button-360-click",["click"],J);f(y).resize(A)};r.update=function(c){f.each(r.subViews,function(a,b){b.update(c)});E.usePeekHover&&("mouseleave"===c.type?w.dispatch("updateSelection",a):"click"===c.type&&(a=M(c)||a))}}}var d=["A","jQuery","imageBlockUtils","postMetric"].concat(f.views);C.when.apply(C,d).register("ImageBlockView",
function(){for(var d=arguments[0],f=arguments[1],l=arguments[2],n=arguments[3],k=[],e=4,K=arguments.length;e<K;e++)k.push(arguments[e]);return m(d,f,l,n,k)})});"use strict";C.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(f,l,m,d,g,N,v){function n(a,b,d,h){if(!m.isjQueryObjDefined(a.find(".a-button-selected"))){var p=z.getCurrentItem();if(!h||"chromeless-video"!==p.type||!c.autoplayVideo){h=
0;"image"===p.type&&(h=Math.max(D(p.color,p.variant),0));var e=b+h;e>=d&&(h=0,e=b);b=m.getImageHash(p.color,h,c);-1!==b&&(q.dispatch("updateModel",{data:{index:h,thumbnailIndex:e,variant:b.variant,type:"image"}}),b=a.find(".item").get(e),m.selectGivenThumbnail(l(b),a))}}}function k(a,b,h){var d=c.colorImages&&c.colorImages[b],p=a;m.isDefined(d)&&(l.each(d,function(b,h){a<c.maxAlts&&(m.createThumbnail({type:"image",index:b,thumbnailIndex:a,variant:h.variant},h.thumb,Q,"imageThumbnail"),a++)}),N.isEnabled&&
v.logAltImgRequestPlacedOnThumbnails(l,N,z),1===c.dp60VideoPosition||e(b)||n(Q,p,a,h));return a}function e(a){var b=!1;c.colorToVideo&&(a=c.colorToVideo[a])&&0<a.filter(function(a){return-1!==c.dp60VariantList.indexOf(a.variant)}).length&&(b=!0);return b}function K(a,b){if("image"===a.type){var h=l("#image-canvas-caption #canvasCaption"),d,p=c.staticStrings,e=c.colorImages,r=a.color,k=a.index;b&&c.useIV?d=p.clickToExpand:e[r]&&e[r][k].hiRes&&c.useHoverZoom?(d=c.useHoverZoomIpad?p.touchToZoom:c.useClickZoom?
p.clickToZoom:p.rollOverToZoom,c.hoverZoomIndicator&&(d="\x3cimg src\x3d'"+c.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+d)):c.useIV&&(d=p.clickToExpand);h.html(d)}}function D(a,b){return m.getIndexForVariant(a,b,c)}function J(b,h){var d;l.each(b.main,function(a,b){m.isDefined(d)||(d=parseFloat(b[1]/b[0])<=parseFloat(c.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});var p="a-dynamic-image "+d,e=m.getMaxDimensionsOfMainImage(b.main,a,c),r=e[0],k=e[1],e=l("\x3cdiv\x3e\x3c/div\x3e"),r={"max-height":r,
"max-width":k};e.addClass(p).css(r).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:h}).data("a-dynamic-image",b.main);return e}function F(a){var c=u.find(".swatchHoverExp");a=J(a);c.find(".imgTagWrapper").html(a);f.loadImageManually(a);return c}function A(b){var d=a.css("height");null!==d&&b.find(".imgTagWrapper").css("height",d);b.addClass("selected");c.imgTagWrapperClasses&&b.find(".imgTagWrapper").addClass(c.imgTagWrapperClasses)}function H(a,b){if("image"===a.type||"unavailable"===
a.type||"lazy-loaded"===a.type){var d=m.getImageHash(a.color,a.index,c);if(-1===d)return d={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},m.lazyLoadingRequired(a,z,c)?r(a,!1,b):(q.dispatch("updateModel",d),m.showUnavailable(a.color)),-1;var h=u.find(".item.itemNo"+a.thumbnailIndex);if(!m.isjQueryObjDefined(h)){var h=a.thumbnailIndex,h=u.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+h+" maintain-height"),p=J(d,b);h.find(".placeHolder").replaceWith(p);
u.find(".list").append(h);f.loadImageManually(p)}A(h);q.dispatch("loadMagnifier");K(a);c.useIV&&m.isDefined(d.hiRes)&&h.css("cursor","pointer");a.isUserGenerated&&(h=z.getPreviousItem(),p=a.variant,m.isDefined(p)&&h.thumbnailIndex!==a.thumbnailIndex&&(N.isEnabled&&v.logAltImgRequestServed(N),g.postCountMetric("ImageThumbnailSelectedVariant:"+p),0===p.indexOf("IG")&&(g.postCountMetric("IGImageSelectedVariant:"+p),g.postCountMetric("IGImageSelectedEvent:"+a.interaction))));f.trigger("dp:image-block:update",
d)}}function M(a){var h=Math.max(D(a.color,z.getCurrentItem().variant),0),h=m.getImageHash(a.color,h,c);if(-1===h)return m.lazyLoadingRequired(a,z,c)?m.lazyLoadOnHoverEnabled(c)&&(b(".3",!0),m.spinner(u,!0),f.delay(function(){z.getCurrentEvent().data===a&&r(a,!0)},500)):m.showUnavailable(a.color),-1;var d=F(h);A(d);f.trigger("dp:image-block:update",h)}function b(a,c){c?u.css("opacity",a):l("#imageBlock").css("opacity",a)}function r(a,e,r){p=e;h=r;var k=a.color,f=c.colorToAsin[k];if(f&&f.asin){var l=
{};l.params={asin:f.asin,productGroupID:c.productGroupID,color:k};l.success=function(b){b?(m.ajaxState(f.asin,"success"),c.colorImages[k]=b.colorImage,m.isDefined(c.spin360ColorEnabled)&&(c.spin360ColorEnabled[k]=b.enable360),k===a.color&&(e&&p?a===z.getCurrentEvent().data&&(E(a),M(a)):(b={type:"updatedData",data:z.getCurrentItem(),onload:r||h},q.dispatch("updateView",b))),C.register(m.rankedImagesReadyEvent(f.asin))):m.ajaxState(f.asin,"fail")};l.error=function(){m.ajaxState(f.asin,"fail")};l.indicator=
m.spinner(u);m.ajaxState(f.asin,void 0)&&"fail"!==m.ajaxState(f.asin,void 0)||(b(".3",e),d.load("/gp/product/features/apparel-main-image/ranked-images.html",l),m.ajaxState(f.asin,"sent"));return c.colorImages&&c.colorImages[k]}}function E(a,b){m.lazyLoadingRequired(a,z,c)||(l("#imageBlock").css("opacity","1"),u.css("opacity","1"),m.spinner(u,!1),u.find("li").removeClass("selected"),l("#image-canvas-caption #canvasCaption").empty(),m.hideUnavailable(),b&&u.find(".list .item").remove())}function w(){var b=
u.find(".item .imgTagWrapper"),h=m.getContainerHeight(a,c.holderRatio,c.holderMaxHeight);0<h&&(a.height(h),b.height(h));u.find("img.a-dynamic-image").each(function(){var b=l(this);b.data("a-manual-replacement")&&f.loadDynamicImage(this);var h=b.data("a-dynamic-image"),h=m.getMaxDimensionsOfMainImage(h,a,c);b.css({"max-height":h[0]+"px","max-width":h[1]+"px"})})}function L(a){K(z.getCurrentItem(),"mouseenter"===a.type)}var x,c,z,q,Q,u,a,p,h,P;return function(b,h,d,p){x=this;c=b;z=h;q=p;c.colorImages[c.landingAsinColor]=
c.colorImages[c.defaultColor];x.render=function(b,h,d,p,e,r,f){u=d;Q=p;a=e;P=k(h,b,r);r||(b=z.getCurrentItem(),m.lazyLoadingRequired(b,z,c)&&q.dispatch("updateModel",{data:{type:"lazy-loaded"}}));E(z.getCurrentItem(),!r);H(z.getCurrentItem(),f);return P};x.update=function(a){var b=a.data;z.setCurrentEvent(a);"ingress"!==b.type&&E(a.data,!1);"swatchHover"===a.type?b.color===z.getCurrentItem().color?H(z.getCurrentItem()):a.captured||-1===M(b)||(a.captured=!0):"image"===b.type&&(b.interaction=a.type,
b.isUserGenerated=!0,"mouseenter"===a.type&&g.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+P),H(b),c.usePeekHover&&"click"!==a.type||(m.selectGivenThumbnail(a.$declarativeParent,Q),"click"===a.type&&g.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+P)))};q.register("imageHover",L);q.register("resize",w)}});"use strict";C.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(f,
l,m,d,g,N){function v(b){M?b.css("cursor","url('"+D.staticImages.zoomIn+"'), auto"):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in"))}function n(b){var d=b.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);b={};if(m.isDefined(d))for(var d=d[1].split("_"),e=0;e<d.length;e++){var k=d[e].match(/^([A-Z]+)(\d+(\.\d+)?)$/);m.isDefined(k)&&(b[k[1]]=parseInt(k[2],10))}return b}function k(b,e){function k(){var b;e.useClickZoom?(b=e.offsetInClickZoom,b=[Math.min(1,Math.max(0,
p[0]-(F[0]+b))/(F[2]-2*b)),Math.min(1,Math.max(0,p[1]-(F[1]+b))/(F[3]-2*b))]):b=a&&a.updatePosition();if(b&&u&&u.detailSize){var h=[u.detailSize[0]-u.rect.width,u.detailSize[1]-u.rect.height];f.capabilities.rtl?u.detailImage.get(0).style.right=-(b[0]*h[0])+"px":u.detailImage.get(0).style.left=-(b[0]*h[0])+"px";u.detailImage.get(0).style.top=-(b[1]*h[1])+"px"}}function w(a){var b=J?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";p=J?[b.pageX,b.pageY]:[a.pageX,a.pageY];if(f.capabilities.rtl){var h=
l(y).width();p=J?[h-b.pageX,b.pageY]:[h-a.pageX,a.pageY]}}function K(c){J&&c.preventDefault();w(c);if(e.useClickZoom)c=[F[0],F[1],F[0]+F[2],F[1]+F[3]];else{var f=a?a.offset:b.offsetParent().offset();c=[h[0]+f.left,h[1]+f.top,h[0]+h[2]+f.left,h[1]+h[3]+f.top];D.acEnabled&&(c=[f.left,f.top,b.offsetParent().width()+f.left,b.offsetParent().height()+f.top])}p[0]<c[0]||p[1]<c[1]||p[0]>=c[2]||p[1]>=c[3]||D.acEnabled&&!b.offsetParent().hasClass("a-dynamic-image-container")?(e.fadeMagnifier?fa||(fa=!0,ca=
setTimeout(function(){x(!0)},500)):e.useClickZoom||x(),aa&&(aa=!1,clearTimeout(C))):(aa||(aa=!0,C=setTimeout(function(){d.postCountMetric("dppc_hoverZoomOpened");g.isEnabled&&N.logHoverZoomRequestServed(g)},1E3)),e.fadeMagnifier&&fa&&(fa=!1,clearTimeout(ca)),k())}function x(h){h&&q.suppressMagnifier(!0);if(I&&(u&&u.hide(),a&&(a.destroy(),a=null),I=!1,J?(b.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),l(document).trigger("disengaged.magnifier")):l(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
z(),h))b.one("click.magnifier touchstart.magnifier",function(a){c(a,!0)})}function c(c,p){p&&q.suppressMagnifier(!1);if(!I&&!R&&(0===T&&(d.postCountMetric("dppc_hoverTime",new Date-(y.ue&&y.ue.t0||0)),T=1),ea[H]||(d.postCountMetric("dppc_hoverMain"),ea[H]=1),h=[b.position().left,b.position().top,b.width(),b.height()],H&&(w(c),u?u.refit().show():u=new ka,e.useClickZoom||(a=a||new ha),F=u.getWindowSize(),k()),I=!0,J?(b.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",K).bind("touchend.magnifier",
x),l(document).trigger("engaged.magnifier")):(D.acEnabled?b.offsetParent().unbind("mousemove.magnifier"):b.unbind("mousemove.magnifier"),l(document).trigger("engaged.magnifier").bind("mousemove.magnifier",K)),p)){var f=l("#zoomWindow");if(0<f.length)f.one("click.magnifier touchend.magnifier",function(a){x(!0)})}}function z(){e.useHoverZoom&&(J?b.bind("touchstart.magnifier touchmove.magnifier",c):D.acEnabled?b.offsetParent().bind("mousemove.magnifier",c):b.bind("mousemove.magnifier",c))}var q=this,
A={detailImageUrl:b.attr("data-old-hires"),location:"over",locationElement:b,prelaod:"ready",zIndex:50,offsetInClickZoom:50};e=l.extend(A,e);e.adjustment=[10,0,-10,0];var u=null,a=null,p=null,h=null,F=null,G={"null":1,"":1,undefined:1},I=!1,R=!1,H=e.detailImageUrl,J=e.useHoverZoomIpad||0,T=0,ea={},ha=function(){function a(c){var h=Math.round(Math.min(b.width(),u.rect.width/c));c=Math.round(Math.min(b.height(),u.rect.height/c));g.css({width:h,height:c});d=[h,c]}var c=this,d=[0,0],f=(u.detailSize&&
u.detailSize[0]||5E8)/h[2],k=(u.detailSize&&u.detailSize[1]||5E8)/h[3],f=k>f?k:f;l("#magnifierLens").remove();var g=l("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});e.generalImageUrls.zoomLensBackground&&g.css({backgroundImage:"url("+e.generalImageUrls.zoomLensBackground+")"});D.showMagnifierOnHover?v(g):g.css("cursor","pointer");c.updatePosition=function(){var a=[h[2]-d[0],h[3]-d[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(p[0]-d[0]/2-h[0]-c.offset.left)/a[0])),e=0>=a[1]?.5:Math.max(0,
Math.min(1,(p[1]-d[1]/2-h[1]-c.offset.top)/a[1])),f=h[0]+Math.round(b*a[0]),a=h[1]+Math.round(e*a[1]);g.get(0).style.left=f+"px";g.get(0).style.top=a+"px";return[b,e]};c.destroy=function(){g.remove()};c.offset=b.offsetParent().offset();a(f);c.updatePosition();g.appendTo(b.parent());u.detailImage[0].complete||u.detailImage.load(function(){var b=u.detailImage.width()/h[2];a(b);c.updatePosition()})};ha.preload=function(){q.preload(e.generalImageUrls.lensBackgroundUrl)};var ka=function(){function a(){var c=
{};if("over"===e.location){var c=e.useClickZoom,h={},f=l("#leftCol"),k=l("#centerCol"),q=l("#rightCol"),w=l("#hover-zoom-end"),I=l("#actionPanelContainer"),x=m.isjQueryObjDefined(f)?f.outerHeight():k.outerHeight();h.top=m.isjQueryObjDefined(f)?f.offset().top:k.offset().top;h.bottom=x+h.top;h.right=m.isjQueryObjDefined(q)?q.offset().left:I.offset().left;h.left=c?0:f.offset().left+f.outerWidth();m.isjQueryObjDefined(w)&&w.offset().top>h.bottom&&(h.bottom=w.offset().top);c=h}else"right"===e.location&&
(c=b.offset(),c={left:c.left+b.outerWidth(),top:c.top,right:c.left+b.outerWidth()+400,bottom:c.top+400});e.minHeightElement&&(c.bottom=Math.max(c.bottom,c.top+l(e.minHeightElement).outerHeight()));c.bottom=Math.min(c.bottom,l(y).scrollTop()+l(y).height());c.left+=p[0];c.top+=p[1];c.right+=p[2];c.bottom+=p[3];c.width=c.right-c.left;c.height=c.bottom-c.top;e.enhancedHoverOverlay&&m.isDefined(y.pageXOffset)&&(h=l(y).width(),c.width=h-c.left+y.pageXOffset-18,c.height-=14);g.css({left:c.left,top:c.top,
width:c.width,height:c.height});d.rect=c;return d}function c(a){var b=new Image;d.detailSize=[0,0];b.onload=function(){d.detailSize=[b.width,b.height];k()};b.src=a.attr("src");if(0<b.width&&0<b.height)d.detailSize=[b.width,b.height];else if(e.detailImageSize)d.detailSize=e.detailImageSize;else{a=n(b.src);var p=h[2]/h[3];a.SS||a.AA?(a=a.SS||a.AA,d.detailSize=[a,a]):a.SX?d.detailSize=[a.SX,Math.round(a.SX/p)]:a.SY?d.detailSize=[Math.round(a.SY*p),a.SY]:a.SL&&(d.detailSize=1<=p?[a.SL,Math.round(a.SL/
p)]:[Math.round(a.SL*p),a.SL])}}var d=this,p=e.adjustment;l("#zoomWindow").remove();var f={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:e.zIndex};e.enhancedHoverOverlay&&(f.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",f.border="1px solid #949494",f.borderColor="rgb(148,148,148)");var g=l("\x3cdiv id\x3d'zoomWindow' /\x3e").css(f);e.fadeMagnifier&&g.fadeIn(200);e.useClickZoom&&(M?g.css("cursor",'url("'+e.zoomOutIcon+'"), auto'):(g.css("cursor","-webkit-zoom-out"),g.css("cursor",
"-moz-zoom-out"),g.css("cursor","zoom-out")));d.updateImage=function(a){a=l("\x3cimg id\x3d'detailImg' src\x3d'"+a+"'/\x3e").css("position","absolute");d.detailImage&&d.detailImage.remove();g.append(a);l(document).trigger("updated.magnifier");d.detailImage=a;c(d.detailImage)};d.refit=function(){a();c(d.detailImage);return d};e.fadeMagnifier?(d.show=function(){g.fadeIn(200);return d},d.hide=function(){g.fadeOut(200);return d}):(d.show=function(){g.show();return d},d.hide=function(){g.hide();return d});
d.destroy=function(){g.remove();return d};d.getWindowSize=function(){return[d.rect.left,d.rect.top,d.rect.width,d.rect.height]};d.updateImage(H);a();g.appendTo(document.body)},fa=!1,ca,aa=!1,C;q.preload=function(a){a=l.makeArray(a);for(var c=a.length,b=0;b<c;b++)a[b]instanceof Array?q.preload(a[b]):"string"===typeof a[b]&&a[b]&&!G[a[b]]&&(G[a[b]]=new Image,G[a[b]].src=a[b])};q.changeImage=function(a,c){I&&x();H=c;b.attr("src",a);q.preload(a);h=[b.position().left,b.position().top,b.width(),b.height()];
c&&("immediately"===e.preload?q.preload(c,!0):l(y).ready(function(){q.preload(c)}),u?u.updateImage(c):b.attr("data-old-hires",c))};q.destroy=function(){b.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");D.acEnabled&&b.offsetParent().unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");l(document).unbind("mousemove.magnifier");a&&a.destroy();a=null;u&&u.destroy();u=null};q.detailImage=function(){return u.detailImage};q.suppressMagnifier=
function(a){R=a};q.isEngaged=function(){return I};q.engageMagnifier=c;q.disengageMagnifier=x;b[0].complete?z():b.one("load",z);q.preload(b.attr("src"));if(e.preload){var da=e.detailImageUrl,A=function(){q.preload(da,!0);e.useClickZoom||ha.preload()},U=e.preload;U.constructor!==Array&&(U=[U]);for(var B=0;B<U.length;B++)if("immediately"===U[B])A();else if(l(y)[U[B]])l(y)[U[B]](A);else l(y).bind(U[B],A)}return q}function e(){if(D.useHoverZoom){var b={adjustment:[0,0,1,1],generalImageUrls:D.staticImages,
location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:D.useHoverZoomIpad,useHoverZoom:D.useHoverZoom,useClickZoom:D.useClickZoom,fadeMagnifier:D.fadeMagnifier,zoomOutIcon:D.staticImages.zoomOutCur,enhancedHoverOverlay:D.enhancedHoverOverlay||D.atfEnhancedHoverOverlay};A&&(A.destroy(),A=void 0);var d=H.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");m.isjQueryObjDefined(d)?D.useClickZoom?(d.one("click.loadmagnifier touchstart.loadmagnifier",
function(e){A=new k(d,b);A.engageMagnifier(e,!0)}),M?d.css("cursor",'url("'+D.staticImages.zoomInCur+'"), auto'):(d.css("cursor","-webkit-zoom-in"),d.css("cursor","-moz-zoom-in"),d.css("cursor","zoom-in"))):A=new k(d,b):g.isEnabled&&N.logHoverZoomApplicability(l,g)}}var K,D,J,F,A,H,M=navigator.userAgent.match(/msie|trident/i);return function(b,d,f,k){K=this;D=b;J=d;g.refToModel=J;F=k;K.render=function(b,d,c,e,f,k){H=c;A&&(A.destroy(),A=void 0)};K.update=function(b){};F.register("loadMagnifier",e);
F.register("resize",e)}});"use strict";C.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(f,l,m,d){function g(f,k,g){f=(f=g?g:m.getColorFromState(k.getState().hovered_variations,n))&&""!==f?f:n.defaultColor;e.dispatch("updateView",{type:"swatchHover",data:{color:f}});d.postCountMetric("swatchHover")}function N(f,g,l,v){f=(f=v?v:m.getColorFromState(g.getState().selected_variations,n))&&""!==f?f:n.defaultColor;f===k.getCurrentItem().color?"function"===typeof l&&
l():(e.dispatch("updateSelection",{type:"swatchClick",data:{color:f},onload:l}),d.postCountMetric("swatchClick"))}var v,n,k,e;return function(d,l,m,F){v=this;n=d;k=l;e=F;f.on("image-block-twister-swatch-hover",g);f.on("image-block-twister-swatch-click",N);v.render=function(d,e,f,b,k){};v.update=function(d){}}});"use strict";C.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(f,l,m,d,g,N){function v(a,e,p,f){!b.autoplayVideo||h||b.useChromelessVideoPlayer?
!d.isjQueryObjDefined(a.find(".a-button-selected"))&&(p=r.getCurrentItem(),1===b.dp60VideoPosition||!f||b.prioritizeVideos||"chromeless-video"===p.type&&b.autoplayVideo)&&(f=d.getVideoHash(p.color,0,b),-1!==f&&(e+=0,E.dispatch("updateModel",{data:{index:0,thumbnailIndex:e,variant:f.variant,type:b.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),e=a.find(".item").get(e),d.selectGivenThumbnail(l(e),a))):(d.selectGivenThumbnail(a.find("img:last"),a),d.fadeToThumbnail(a.find("img").length-
1,c,a))}function n(a){var c=r.getCurrentItem().color;if(b.useChildVideos&&!b.colorToVideo[c]){var h=function(){if(a){b.colorToVideo[c]=a;var d={type:"updatedData",data:r.getCurrentItem()};E.dispatch("updateView",d)}};b.lazyLoadExperienceDisabled?h():C.when(d.rankedImagesReadyEvent(b.colorToAsin[c].asin)).execute(function(){h()})}}function k(a){if(!b.useChildVideos)return d.lazyLoadingRequired(r.getCurrentItem(),r,b)?void 0:b.videos;if(b.colorToVideo[a])return b.colorToVideo[a];var c=b.colorToAsin[a];
if(c&&c.asin){var h={};h.params={asin:c.asin,productGroupID:b.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:b.useChromelessVideoPlayer,isUDP:b.isUDP};b.isDPXFeatureEnabled||(h.success=function(a){n(a)},g.load("/gp/product/features/apparel-main-image/videos.html",h));return b.colorToVideo&&b.colorToVideo[a]}}function e(){E.dispatch("selectThumbnail",d.useTabbedImmersiveView(b)?1:0)}function K(a,c,b,h){return m.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:a[0],streamingUrls:c.url,
swfUrl:b.swfUrl,foresterMetadataParams:b.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var c=d.isjQueryObjDefined(a.find("video"))?"HTML5":"FLASH";N.postCountMetric("dppc_chromelessVideo:"+c)},playing:function(){a.parent().css("z-index",8)},videounsupported:function(){e();N.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){e();N.postCountMetric("dppc_chromelessVideo:ERROR")},
ended:function(){q.seek(0)}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(c,b,d){c=d.durationSeconds-d.playheadTimeSeconds;a.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*c,.1,function(){a.parent().css({"background-color":"transparent","z-index":-1});e();l(this).show().css("opacity",1)})}}]})}function D(a){if("chromeful-video"===a.type||"chromeless-video"===a.type){var e=d.getVideoHash(a.color,a.index,b);if(-1===e)return-1;if("chromeful-video"===
a.type){a=a.color;var p=c.width()/c.height(),k=parseInt(e.videoWidth,10),g=parseInt(e.videoHeight,10);d.updateAspectRatio(p,k,g,L);1===b.dp60VideoPosition&&(p=q,L.css("height","100%"),d.setVideoBlockBackgroundColor("#FFFFFF"),b.colorImages&&b.colorImages[a]&&b.colorImages[a][0]&&(e.slateUrl=b.colorImages[a][0].large),p&&p.loadMedia({mediaSourceInfo:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl}}));
q?(q.show(),d.loadMediaIntoAiry(q,e,y)):q=d.createAiryInstanceForChromeful(L,e,y,null,b.autoplayVideo,c,x,w);b:if(d.useTabbedImmersiveView(b)){if(1<d.getVideosCount(r.getCurrentItem().color,b)){if(d.isDefined(z)){x.show();break b}z=l('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(b.staticStrings.watchMoreVideos);x.find("#videoCaption").append(z);f.declarative.create(z,"videoIngressClick",u)}d.playVideoInImmersiveView(b,r.getCurrentItem().color)&&(f.declarative.create(L,"videoIngressClick",
u),L.children().css("z-index","-1"),L.css("display","inline-block"))}else x.find("#videoCaption").text(b.staticStrings.playVideo),x.show();e=q;b.autoplayVideo&&e&&!h&&(d.toggleVideoCaption(x),e.setVolume(0),e.show(),e.play(),h=!0)}else q?(q.show(),d.loadMediaIntoAiry(q,e,y),q.play(),x.show()):(q=K(L,e,y))&&q.play()}}function J(a,c,h){var e=k(c),f=a;d.isDefined(e)&&0<e.length&&b.alwaysIncludeVideo&&a===b.maxAlts&&(w.find(".item:last").remove(),a--);d.isDefined(e)&&(l.each(e,function(h,f){if(a<b.maxAlts){var k=
b.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",g={type:k,index:h,thumbnailIndex:a,variant:f.variant};u={type:"video-ingress",index:h,thumbnailIndex:a,variant:f.variant};d.useTabbedImmersiveView(b)&&("chromeful-video"===k&&(P+=" videoBlockIngress  videoBlockDarkIngress",f.thumb=f.thumb.replace("_PKmb-play-button-overlay-thumb","")),b.altsOnLeft||(P+=" a-align-top"));if(1===b.dp60VideoPosition){b.dp60VideoThumbMap&&b.dp60VideoThumbMap[c]&&(f.thumb=b.dp60VideoThumbMap[c]);d.createThumbnail(g,
f.thumb,w,P);var q=w,g=b.dp60VideoPosition;if(0!==g){var m=q.children(".imageThumbnail"),q=q.children(".videoBlockIngress");m&&q&&m[g-1]&&l(m[g-1]).before(q[0])}}else d.createThumbnail(g,f.thumb,w,P);d.useTabbedImmersiveView(b)&&(A(w.find(".videoBlockIngress img"),b.videoIngressATFSlateThumbURL),g=1<e.length?"multiple-videos":"one-video",(m=1<e.length?e.length+" "+b.staticStrings.multipleVideos:b.staticStrings.singleVideo)&&w.find(".videoBlockIngress").append(w.find("#videoCount_template").clone().text(m).attr("id",
"videoCount")).addClass(g));p||(p=!0,N.postCountMetric("chromeless-video"===k?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));a++}if(d.useTabbedImmersiveView(b))return!1}),1===b.dp60VideoPosition&&0<e.length&&(f=0),v(w,f,a,h),1===b.dp60VideoPosition&&0<e.length&&F(b,G,d));return a}function F(a,c,b){c.find("li").removeClass("selected");l("#canvasCaption").empty();b.hideUnavailable()}function A(a,c){var b=a.attr("src");if(b&&c){a.attr("src",c);var d=new Image;d.onload=function(c){a.attr("src",
b)};d.src=b}}function H(a){q&&q.pause();a.data=u;a.clickTimeStamp=a.$event.timeStamp;var c="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";E.dispatch("imageClick",a);N.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);N.postCountMetric(c)}var M,b,r,E,w,L,x,c,z,q,y,u,a,p=!1,h=!1,P="videoThumbnail",G;return function(h,e,p,k){M=this;b=h;r=e;E=k;y=b.airyConfig;b.colorToVideo={};b.colorToVideo[b.landingAsinColor]=b.colorToVideo[b.defaultColor]=b.videos;M.render=function(h,
e,p,k,g,q){w=k;G=p;L=g.find("#main-video-container");x=L.parent().find("#video-canvas-caption");c=l("#main-image-container");b.useChromelessVideoPlayer||L.addClass("chromeful-container");a=J(e,h,q);D(r.getCurrentItem());d.useTabbedImmersiveView(b)&&f.declarative("videoIngressClick",["click"],H);return a};M.update=function(c){var h=c.data;"ingress"!==h.type&&q&&(q.hide(),L.parent().css("z-index",-1),x.hide());if("swatchHover"===c.type)h.color===r.getCurrentItem().color?D(r.getCurrentItem()):c.captured||
d.lazyLoadingRequired(h,r,b)&&!d.lazyLoadOnHoverEnabled(b)&&D(r.getCurrentItem());else if("chromeful-video"===h.type||"chromeless-video"===h.type)"mouseenter"===c.type&&N.postCountMetric("dpcc_videoThumbHovered_"+(h.thumbnailIndex+1)+"_"+a),D(h),b.usePeekHover&&"click"!==c.type||(d.selectGivenThumbnail(c.$declarativeParent,w),"click"===c.type&&d.useTabbedImmersiveView(b)&&(N.postCountMetric("dpcc_videoThumbClicked_"+(h.thumbnailIndex+1)+"_"+a),u.action="videoIngressClick",u.clickTimeStamp=c.$event.timeStamp,
E.dispatch("videoIngressClick",u),N.postTimeMetric("dpcc_vse_videoingressclick",c.$event.timeStamp)))};if(b.isDPXFeatureEnabled)f.on("triggerVideoAjax",n)}});"use strict";C.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(f,l,m,d,g,N,v,n,k,e){function K(a){return a.hiRes||a.large||a.main[a.main.length-1]}function D(){t.find("#ivTitle").click(function(){ia.hide()})}
function J(){O=Pa?{type:"360-spin"}:V.getCurrentItem()}function F(){var a=t.find("#ivStage"),c=ia.$container.find(".a-popover-wrapper"),b=c.find(".a-popover-inner"),c=c.height()-e.getDimension(b,"padding-top")-e.getDimension(b,"padding-bottom");t.css("height",c);var b=t.find("#ivTitle").outerHeight(!0),d=t.find("#ivVariationSelection").outerHeight(!0),h=t.find("#ivMediaSelection").outerHeight(!0),f=t.find("#ivThumbs"),p=e.getDimension(f,"margin-top")+e.getDimension(f,"margin-bottom");f.css("height",
c-b-d-h-p);t.find("#ivLargeImage").css("height",c);a.css("width",t.width()-e.getDimension(t,"padding-left")-e.getDimension(t,"padding-right")-t.find("#ivThumbColumn").width()-e.getDimension(a,"margin-left")-e.getDimension(a,"margin-right"))}function A(){t.find("#ivMediaSelect").change(function(){var a=d(this).val();"all"===a?(t.find("#ivVideoList").hide(),t.find("#ivThumbs").show(),t.find(".ivThumbVideo").show(),"chromeful-video"===O.type&&t.find("#ivVideo_"+O.index).click()):"images"===a?(t.find("#ivVideoList").hide(),
t.find("#ivThumbs").show(),t.find(".ivThumbVideo").hide(),"chromeful-video"===O.type&&(0===ba&&0===W?t.find("#iv360").click():0===ba?t.find("#ivHeroImage_0").click():t.find("#ivImage_0").click())):"videos"===a&&(t.find("#ivVideoList").show(),t.find("#ivThumbs").hide(),"chromeful-video"!==O.type?t.find("#ivVideoList_0").click():t.find("#ivVideoList_"+O.index).click())})}function H(){var a=t.find("#ivStage").find("#ivLargeImage"),c=a.width(),b=a.height(),d=a.find(".fullscreen");d.removeAttr("style");
var h=d.width(),e=d.height();0<d.length&&(d[0].naturalWidth&&(h=d[0].naturalWidth),d[0].naturalHeight&&(e=d[0].naturalHeight));a.css("cursor","auto");var h=0===h?1:h,e=0===e?1:e,f=Math.min(c/h,b/e),p=e*f,k=h*f;1>f?(Qa?a.css("cursor","url('"+B.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),Ba=!0):Ba=!1;h=Math.min(k,h);e=Math.min(p-20,e);d.css({"margin-top":(b-e)/2,"margin-left":(c-h)/2,height:e,width:h});a.css("visibility",
"visible");Ca=!1}function M(a){var c=t.find("#ivLargeImage");c.css("visibility","hidden");c.empty();e.animateStageIn(c);c.append(a);H()}function b(){X&&X.pause();t.find("#ivLarge360").css("display","none");t.find("#ivLargeVideo").css("display","none");t.find("#ivLargeImage").css("display","none");z()}function r(a){b();t.find("#ivLargeImage").css("display","block");var c;"hero-image"===a?g.isDefined(ga)&&(c=K(ga[O.index])):g.isDefined(na)&&(c=K(na[O.index]));if(g.isDefined(c)){t.find(".fullscreen").remove();
var h=d("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),f=t.find("#ivLargeImage");e.animateStageOut(f,function(){h.load(function(){M(h)});if(h[0].complete)M(h);else{f.empty();var a=(f.height()-104)/2,c=(f.width()-80)/2;d("\x3cimg\x3e").attr("src",B.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(f)}})}}function E(){var a=parseInt(O.index,10)+1;a>=ma.length||t.find("#ivVideo_"+a).click()}function w(){var a;g.isDefined(ma)&&(a=ma[O.index]);if(g.isDefined(a)){b();
var c=t.find("#ivLargeVideo").css("display","block");X?(X.isDetached()&&X.attach(c[0]),g.loadMediaIntoAiry(X,a,ya),X.show()):(X=g.createAiryInstanceForChromeful(c,a,ya,"ImmersiveView"),ya.enableContinuousPlay&&X.bind("ended",E));X.play({isAsync:!0})}}function L(){J();var a;a="hero-image"===O.type?t.find("#ivHeroImage_"+O.index):"image"===O.type?t.find("#ivImage_"+O.index):"chromeful-video"===O.type||"chromeless-video"===O.type?t.find("#ivVideo_"+O.index):"360-spin"===O.type?t.find("#iv360"):g.isDefined(ga)?
t.find("#ivHeroImage_"+O.index):t.find("#ivImage_"+O.index);g.isjQueryObjDefined(a)||(a=t.find("#ivImage_0"));x(a)}function x(a){t.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(O.type="chromeful-video",O.index=a.attr("id").split("_")[1],w()):a.hasClass("ivHeroImage")?(O.type="hero-image",O.index=a.attr("id").split("_")[1],r(O.type)):a.hasClass("iv360Image")?(O.type="360-spin",O.index=0,c()):(O.type="image",O.index=a.attr("id").split("_")[1],r(O.type))}
function c(){b();t.find("#ivLarge360").css("display","block");p();var a=t.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});e.animateStageIn(a)},200);C();v.postCountMetric("dppc_click360");ua=Date.now()}function z(){0<ua&&(q("dppc_duration360",Date.now()-ua),ua=0)}function q(a,c){y.ue&&y.ue.count(a,c)}function C(){if(0<ra){var a=t.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function u(a,c){if(ra<a.length){var b=d("\x3cimg /\x3e").css({display:"block",
width:6*oa+"px",height:va+"px"});b.hide();c.append(b);b.get(0).onload=function(){c.closest(document.documentElement).length&&(ra++,1===ra&&(C(),0<ua&&q("dppc_loadTime360",Date.now()-ua)),0<Ia&&q("dppc_perSpriteloadTime360",Date.now()-Ia),t.find("#iv360Spinner").hide(),b.show(),za=5*S.imageLocations[Math.floor(Aa/S.imageLocations[0].length)][Aa%S.imageLocations[0].length],u(a,c))};b.attr("src",a[ra].replace(/(\._SP)\d+(,)\d+/,"$1"+wa+"$2"+xa));Ia=Date.now()}}function a(a){if(g.isDefined(S.spriteWidthSizes)&&
0<S.spriteWidthSizes.length){var c=S.spriteWidthSizes,b=c.length,d=c[0],h=c[b-1];if(a<=d)return d;if(a>h)return h;for(d=0;d<b;d++)if(a>c[d]&&a<=c[d+1])return c[d+1]}else return a}function p(){var a=t.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none",
"-mos-user-select":"none"}),d("\x3cimg\x3e").attr("src",B.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Ja=!0,h())}function h(){if(g.isDefined(S.spriteURLs)&&g.isDefined(t)&&Ja&&!Ka){var c=t.find("#ivLarge360"),b=d("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});g.isDefined(S.staticImages.hint360)&&d("\x3cimg\x3e").css({"margin-left":"auto",
"margin-right":"auto",display:"block"}).attr("src",S.staticImages.hint360).appendTo(b);d("\x3cdiv\x3e").css({"text-align":"center"}).text(B.staticStrings.dragToSpin).appendTo(b);b.appendTo(c);var b=S.imageWidth,h=S.imageHeight,e=c.parent().width(),f=c.parent().height(),p=0,k=0;b/h>e/f?(wa=a(e),xa=Math.round(h/b*wa),oa=Math.ceil(e),va=Math.ceil(xa/wa*e),k=(f-va)/2):(xa=a(f),wa=Math.round(b/h*xa),va=Math.ceil(f),oa=Math.ceil(wa/xa*f),p=(e-oa)/2);c.css({"margin-left":p,"margin-top":k,width:oa+"px",height:va+
"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*oa+"px");u(S.spriteURLs,t.find("#image-360-sprites"),0);b=t.find("#ivLarge360");b.bind("mousedown",R);b.bind("touchstart",P);b.bind("touchmove",G);b.bind("touchend",I);d(document).bind("mousemove",Y);d(document).bind("mouseup",Z);g.isDefined(B.staticImages.grab)&&c.css("cursor","url('"+B.staticImages.grab+"'), auto");Ka=!0}}function P(a){Da=!0;La=a.originalEvent.targetTouches[0].clientX}function G(a){Da&&(T(a.originalEvent.targetTouches[0].clientX-
La),La=a.originalEvent.targetTouches[0].clientX)}function I(a){Da&&(Da=!1)}function R(a){Ea=!0;Ma=a.originalEvent.clientX;g.isDefined(B.staticImages.grabbing)&&(a=t.find("#ivLarge360"),a.css("cursor","url('"+B.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+B.staticImages.grabbing+"'), auto"));return!1}function Y(a){Ea&&(T(a.originalEvent.clientX-Ma),Ma=a.originalEvent.clientX)}function Z(a){Ea&&(Ea=!1,g.isDefined(B.staticImages.grab)&&(a=t.find("#ivLarge360"),
a.css("cursor","url('"+B.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function T(a){for(a=za-=a/oa*180;0>a;)a+=360;for(;360<a;)a-=360;za=a;var c;a=360;for(var b=0;b<ra;b++)for(var d=0;d<S.imageLocations[b].length;d++){var h=Math.abs(za-5*S.imageLocations[b][d]);h<a&&(a=h,c=b*S.imageLocations[0].length+d)}c!==Aa&&(a=Math.floor(c/S.imageLocations[0].length),a!==Math.floor(Aa/S.imageLocations[0].length)&&(g.isDefined(Na)||(Na=document.createElement("canvas").getContext("2d")),
b=t.find("#image-360-sprites").children(),Na.drawImage(b[a],0,0)),a=t.find(".iv360Hint").not(".iv360HintFaded"),g.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));Aa=c;a=c%S.imageLocations[0].length*-1*oa;c=-1*Math.floor(c/S.imageLocations[0].length)*va;b=t.find("#ivLarge360").children("#image-360-sprites");b.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");b.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function ea(){t.delegate(".ivThumb","click",function(){var a=
d(this);x(a)});t.delegate(".ivThumbVideoListOuter","click",function(){t.find(".ivThumbVideoListOuter").removeClass("selected");var a=d(this);a.addClass("selected");O.type="chromeful-video";O.index=a.attr("id").split("_")[1];w()})}function ha(){X&&!X.isDetached()&&(ya.volume=X.getVolume(),X.detach(),!document.all||y.atob||document.addEventListener||(X=null));t.find("#ivLargeImage").empty();z()}function ka(a,c){return 0<c?c/2:Math.min(0,Math.max(c,a))}function fa(a){var c=sa.left-(a.pageX-Fa[0])*Ga;
f.capabilities.rtl&&(c=sa.left-(d(y).width()-a.pageX-Fa[0])*Ga);a=sa.top-(a.pageY-Fa[1])*Ga;c=ka(c,Ha.left);a=ka(a,Ha.top);t.find(".fullscreen").css({left:c,top:a})}function ca(){t.delegate("#ivLargeImage","click",function(a){if(Ca)H();else if(Ba){t.find(".fullscreen").removeAttr("style");if(Ba){var c=t.find("#ivLargeImage"),b=c.find(".fullscreen");Qa?c.css("cursor","url('"+B.staticImages.zoomOut+"'), auto"):(c.css("cursor","-webkit-zoom-out"),c.css("cursor","-moz-zoom-out"),c.css("cursor","zoom-out"));
Ca=!0;var d=t.find("#ivLargeImage");Ha.left=d.width()-b.width();Ha.top=d.height()-b.height();var d=c.height()/2,h=c.width()/2;Fa=[c.offset().left+h,c.offset().top+d];sa.top=d-b.height()/2;sa.left=h-b.width()/2;b.css({position:"relative",left:sa.left,top:sa.top});Ga=Math.max(b.height()/c.height(),b.width()/c.width())}fa(a)}});t.delegate("#ivLargeImage","mousemove",function(a){Ca&&fa(a)})}function aa(a){if(g.isImmersiveViewEnabled(B,V.getCurrentItem().color)){Pa=g.isDefined(a)&&"button-360-click"===
a.action;n.isEnabled&&k.logImmersiveViewRequestServed(n);v.postCountMetric("dppc_immersiveViewOpened");if(g.isDefined(ia))ia.show();else{a=d("#auiImmersiveViewDiv");var c=d(y).height()-150,b=d(y).width()-75;ia=l.create(a,{name:"immersiveView",activate:"onclick",width:b,height:c,popoverLabel:"ImmersiveView",hideHeader:!0});a.click()}if(Oa){t=d("#ivMain");a=V.getCurrentItem().color;na=B.colorImages[a];ga=B.heroImage[a];ma=B.useChildVideos?B.colorToVideo[a]:B.videos;ta=da()&&B.spin360ColorEnabled[a];
S=da()?B.spin360ColorData[a]:void 0;J();ja=W=qa=ba=0;g.isDefined(ga)&&(W=ga.length);g.isDefined(na)&&(ba=na.length);g.isDefined(ma)&&(qa=ma.length);ta&&(ja=1);e.populateTitle(t.find("#ivTitle"),45,B);e.populateVariationSelection(t.find("#ivVariationSelection"));a=t.find("#ivMediaSelect");0===ba+ja||0===qa?(a.parent().hide(),t.find("#ivThumbs").addClass("noMediaSelection")):(a.empty(),d("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(B.staticStrings.allMedia+" ("+(W+ba+ja+qa)+")").appendTo(a),
d("\x3coption/\x3e").attr("value","images").text(B.staticStrings.images+" ("+(W+ba+ja)+")").appendTo(a),d("\x3coption/\x3e").attr("value","videos").text(B.staticStrings.videos+" ("+qa+")").appendTo(a),a.parent().show(),a.val("all"));a=t.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var c=W+ba+qa+ja,h=b=0;b<c;)for(var p=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),q=0;3>q&&b<c;q++,b++,h++)if(h<W){var m=ga[b].thumb,w=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+b).appendTo(p);w.find(".ivThumbImage").css("background",'url("'+e.getResizedThumbnailURL(m)+'") center no-repeat')}else if(h>=W&&h<ba+W)m=na[b-W].thumb,w=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(b-W)).appendTo(p),w.find(".ivThumbImage").css("background",'url("'+e.getResizedThumbnailURL(m)+'") center no-repeat');else if(h>=W+ba&&h<ba+W+ja)w=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id",
"iv360").appendTo(p),w.find(".ivThumbImage").css("background",'url("'+(g.isDefined(B.staticImages.icon360)?e.getResizedThumbnailURL(B.staticImages.icon360,!0):"")+'") center no-repeat');else if(m=ma[b-ba-W-ja],w=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(b-ba-W-ja)).appendTo(p),w.find(".ivThumbImage").css("background",'url("'+m.thumbUrl+'") center no-repeat'),g.isDefined(m)){var x={position:"triggerTop"},z=t.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");
z.find(".ivVideoPopoverTitle").text(m.title);z.find(".ivVideoPopoverDuration").text(m.durationTimestamp);x.inlineContent=z[0];f.declarative.create(w,"a-tooltip",x)}a=t.find("#ivVideoList");a.find(".ivThumbVideoListOuter").not(".placeholder").remove();c=a.find(".placeholder");for(b=0;b<qa;b++)h=ma[b],p=c.clone().removeClass("placeholder").appendTo(a),p.attr("id","ivVideoList_"+b),p.find(".ivThumbImage").css("background",'url("'+h.thumbUrl+'") center no-repeat'),p.find(".ivThumbTitle").text(h.title),
p.find(".ivThumbDuration").text(h.durationTimestamp);t.find("#ivLarge360").empty();ra=0;Ka=Ja=!1;ya=B.airyConfig;Oa=!1;Ra()}}}function la(a){var c=B.colorToAsin[a],b={},d=500;if(c&&c.asin){b.params={asin:c.asin};var e="360"+c.asin,f=Date.now();b.success=function(c){q("dppc_asyncRequestTime360",Date.now()-f);c&&g.isDefined(c.spin360.spin360Model)?(g.ajaxState(e,"success"),B.spin360ColorData[a]=c.spin360.spin360Model,a===V.getCurrentItem().color&&(S=B.spin360ColorData[a],h())):b.error()};b.error=function(){v.postCountMetric("dppc_asyncFailed360");
q("dppc_asyncRequestTime360",Date.now()-f);d*=2;16E3>=d?setTimeout(function(){f=Date.now();N.load("/gp/product/features/apparel-main-image/360.html",b)},d):g.ajaxState(e,"fail")};g.ajaxState(e)&&"fail"!==g.ajaxState(e)||(N.load("/gp/product/features/apparel-main-image/360.html",b),g.ajaxState(e,"sent"))}}function da(){return g.isDefined(B.spin360ConfigEnabled)&&B.spin360ConfigEnabled}var U,B,V,pa,ia,t,ga,na,ma,W,ba,qa,ja,O,X,ya,S,ta,oa,va,xa,wa,Ma,La,Pa=!1,Ja=!1,Ka=!1,za=0,Aa=0,ua=0,Ia=0,Ea=!1,Da=
!1,ra=0,Na,Qa=navigator.userAgent.match(/msie|trident/i),Oa=!0,Ca=!1,Ba=!1,Ha={},sa={},Ga,Fa,Ra=f.once(function(){A();ea();ca();f.on("a:popover:afterUpdatePosition:immersiveView",F);f.on("a:popover:afterShow:immersiveView",L);f.on("a:popover:afterHide:immersiveView",ha);D()});return function(a,c,b,h){U=this;B=a;V=c;n.refToModel=V;pa=h;da()&&(B.spin360ColorData[B.landingAsinColor]=B.spin360ColorData[B.defaultColor],B.spin360ColorEnabled[B.landingAsinColor]=B.spin360ColorEnabled[B.defaultColor]);g.isDefined(B.staticImages.icon360)&&
d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",e.addStyleCodeToURL(B.staticImages.icon360,"_FMpng_RI_"));U.render=function(a,c,b,h,d,e){Oa=!0;da()&&B.spin360ColorEnabled[a]&&!g.isDefined(B.spin360ColorData[a])&&(B.spin360ColorData[a]={},la(a));g.isImmersiveViewEnabled(B,V.getCurrentItem().color)&&da()&&B.spin360ColorEnabled[a]&&(c===B.maxAlts&&(a=h.find(".item.imageThumbnail"),b=h.find(".item.videoThumbnail"),g.isDefined(b)&&1<b.length?b.last().remove():a.last().remove(),
c--),a=h.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(a,"button-360-click"),h.append(a),c++,v.postCountMetric("dppc_display360"));return c};U.update=function(a){};pa.register("imageClick",aa);pa.register("button360Click",aa)}});"use strict";C.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",
function(f,l,m,d,g,N,v,n,k,e){function K(){var b=H.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-e.getDimension(c,"padding-top")-e.getDimension(c,"padding-bottom");d("#iv-tab-view-container").css("height",b);r=d("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==d(this).css("display")}).length;1<r?(d("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=d("#iv-tab-view-container ul.iv-tab-views li").parent().height(),
b-=c):d("#iv-tab-view-container ul.iv-tab-views li").parent().hide();d("#iv-tab-view-container .iv-tab-content").css("height",b);f.trigger("dp:image-block:immersive-view:resize")}function D(){f.trigger("dp:image-block:immersive-view:reset")}function J(e){if(g.isImmersiveViewEnabled(A,H.getCurrentItem().color)){n.isEnabled&&k.logImmersiveViewRequestServed(n);v.postCountMetric("dppc_immersiveViewOpened");g.isDefined(e)&&("button-360-click"===e.action?d("#iv360TabHeading").click():"videoIngressClick"===
e.action?(E=e.clickTimeStamp,d("#ivVideosTabHeading").click()):d("#ivImagesTabHeading").click());var c=H.getImmersiveViewModalInstance();if(g.isDefined(c))c.show();else{e=d("#auiImmersiveViewDiv");var c=Math.min(Math.max(d(y).height()-150,540),1080),m=Math.min(Math.max(d(y).width()-75,990),1980),c=l.create(e,{name:"immersiveView",activate:"onclick",width:m,height:c,popoverLabel:"ImmersiveView",hideHeader:!0});H.setImmersiveViewModalInstance(c);e.click()}b&&(b=!1,w(),f.trigger("dp:image-block:immersive-view:init"))}}
var F,A,H,M,b=!0,r=0,E,w=f.once(function(){f.on("a:popover:afterUpdatePosition:immersiveView",K);f.on("a:popover:afterShow:immersiveView",K);f.on("a:popover:afterHide:immersiveView",D)}),L=f.once(function(){var b=d("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(c){var e=b.filter(".iv-active");e.attr("id")!==d(this).attr("id")&&f.trigger("dp:ivTabs:"+e.find("a").attr("data-iv-tab-view")+":deselect",c);b.removeClass("iv-active");d(this).addClass("iv-active");d("#iv-tab-view-container .iv-tab-content").hide();
e=d(this).find("a").attr("data-iv-tab-view");d("#"+e).show();"ivVideosTab"===e&&(c.clickTimeStamp=E||c.timeStamp);f.trigger("dp:ivTabs:"+e+":select",c);v.postCountMetric("dppc_"+e);return!1})});return function(d,c,e,f){F=this;A=d;H=c;n.refToModel=H;M=f;F.render=function(c,d,a,e,h,f){v.postCountMetric("dpcc_altThumbs_"+d);b=!0};F.update=function(c){};F.getTitle=function(){};F.getVariationSelectionInfo=function(){};L();M.register("imageClick",J);M.register("button360Click",J);g.useTabbedImmersiveView(A)&&
M.register("videoIngressClick",J)}});"use strict";C.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(f,l,m){return{load:function(d,g){g=g||{};g.timeout=g.timeout||4E3;f.ajax(d,g)}}});"use strict";C.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(f,l,m,d,g,N,v,n){function k(a){return null!==a&&"undefined"!==typeof a}function e(a){var c=0;l.each(a,function(a,b){var d=parseInt(b[1],
10);d>c&&(c=d)});return c}function K(a){var c=0;l.each(a,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function D(a,c,b){c=c.width();if(b.naturalMainImageSize)return c;a=e(a);0<a&&(c=Math.min(c,a));return c}function J(a,c,b){c=c.height();if(b.naturalMainImageSize)return c;a=K(a);0<a&&(c=Math.min(c,a));return c}function F(a){var c;l.each(a,function(a,b){k(c)||(c=b[1]/b[0])});return c||1}function A(a,c,b){c.fadeTo(500,0,function(){M(a,b);c.fadeTo(500,1)})}function H(a){a&&a.toggle()}function M(a,
c){var b=c.find("img");k(b[a])&&l(b[a]).click()}function b(a,c){C[a]=c?c:C[a];return C[a]}function r(a,c,b){b=b||q;b=b.colorImages;if(1>b.length||!k(b[a])||!k(c))return-1;var d=-1;l.each(b[a],function(a,b){b.variant===c&&(d=a)});return d}function E(a,c,b){b=b||q;b=b.colorImages;return!(k(b)&&k(b[a])&&k(b[a][c])&&k(b[a][c].main))||1>l.map(b[a][c].main,function(a,c){return c}).length?-1:b[a][c]}function w(a,c,b,d){d.parent().css("z-index",2);0!==b&&0!==c&&(c/=b,a>c?d.css("width",c/a*100+"%"):d.css("height",
a/c*100+"%"))}function L(a,c){var b;if(b=a.useIV)b=a.colorImages&&a.colorImages[c]&&0<a.colorImages[c].length?!0:!1;v.isEnabled&&(v.IVApplicaple=b,n.logImmersiveViewApplicability(l,v));return b}function x(a){return a.playVideoInImmersiveView&&"false"!==a.playVideoInImmersiveView}var c,z,q=l.extend(!0,{},g,N),C={},u="#000000";return{isDefined:k,isDefinedAndEmpty:function(a){return k(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return k(a)?"object"===typeof a&&
0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return k(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:F,getMaxHeightOfMainImage:J,getMaxWidthOfMainImage:D,getMaxDimensionsOfMainImage:function(a,c,b){var d=J(a,c,b);c=D(a,c,b);a=F(a);b=c/a;c=Math.min(c,d*a);d=Math.min(d,b);return[d,c]},getContainerHeight:function(a,c,b){var d=a.get(0);a=0;if(k(d)){a=d.offsetWidth/c;a=Math.min(a,b);var e;c=q.mainImageHeightPartitions;
b=q.mainImageMaxSizes;if(k(b)&&k(c)){for(var f=0,g=y.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<c.length;d++)g>c[d]&&(f=d+1);b.length>=f&&(e=b[f])}k(e)&&(a=Math.min(e[1],a))}return a},getColorFromState:function(a,c){if(a){c=c||q;var b="";l.each(c.visualDimensions,function(c,d){a[d]&&(b+=" "+a[d])});return b&&b.substring(1)}},createThumbnail:function(a,c,b,d){var e=b.find(".template").clone().removeClass("template").addClass("item"),g=document.createElement("img");
g.src=c;e.find(".placeHolder").replaceWith(g);(c=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===c&&e.addClass("heroImageThumbnail");k(d)&&e.addClass(d);f.declarative.create(e,"thumb-action",a);b.append(e)},selectGivenThumbnail:function(a,c){var b=a.find(".a-button");c.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");b.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,e,f,k,g,q,w){var n=l.extend({},e.foresterMetadataParams);
null!==f&&(n.method+="."+f);var v=[];b.disabledViewIds&&(v=b.disabledViewIds);return m.embed({parentElement:a[0],streamingUrls:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,swfUrl:e.swfUrl,foresterMetadataParams:n,backgroundColor:u,flashParams:{wmode:"transparent"},slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl},videoAds:e.videoAds,bindings:{play:function(){"ImmersiveView"===f?c||(c=!0,d.postCountMetric("dppc_chromefulVideoPlayedIV")):
z||(z=!0,d.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:b.durationSeconds-1,type:"position",callback:function(a,c,b){k&&(A(0,g,w),H(q))}}],disabledViewIds:v})},setVideoBlockBackgroundColor:function(a){u=a},getVideoBlockBackgroundColor:function(){return u},loadMediaIntoAiry:function(a,c,b){a&&a.getMediaSourceInfo()!==c.url&&a.loadMedia({mediaSourceInfo:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,slateImages:{preloadSlate:c.slateUrl,
postMediaSlate:c.slateUrl}})},showUnavailable:function(a){a&&(l("#imageBlock .unvailableVariation").html(a),l("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){l("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:A,toggleVideoCaption:H,selectThumbnail:M,spinner:function(a,c){var b=l("#imageBlock .a-spinner").parent();0===b.length&&(b=l("\x3cdiv\x3e\x3c/div\x3e").append(l("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),a.append(b),b.css({position:"absolute",
left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?b.show():b.hide();return b},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:b,getIndexForVariant:r,getImageHash:E,lazyLoadingRequired:function(a,c,d){c=Math.max(r(a.color,c.getCurrentItem().variant,d),0);
c=-1!==E(a.color,c,d);a=d.colorToAsin[a.color]&&d.colorToAsin[a.color].asin;a=!a||"success"!==b(a);return!d.lazyLoadExperienceDisabled&&!c&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:w,repositionVideoBanner:function(a,c,b,d){setTimeout(function(){var b=a.width()/a.height();w(b,16,9,c)},d||0)},getVideosCount:function(a,c){return c.useChildVideos&&c.colorToVideo[a]?c.colorToVideo[a].length:c.videos?c.videos.length:0},getVideoHash:function(a,c,
b){if(b.useChildVideos){if(!k(b.colorToVideo))return-1;a=b.colorToVideo[a]}else a=b.videos;return k(a)&&k(a[c])&&k(a[c].url)?a[c]:-1},isImmersiveViewEnabled:L,playVideoInImmersiveView:function(a,c){return L(a,c)&&x(a)},useTabbedImmersiveView:x}});"use strict";C.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(f,l,m,d,g){function y(b,e,f,c){if(!m.isjQueryObjDefined(b.find(".a-button-selected"))){var k=H.getCurrentItem();if(!c||"chromeless-video"!==
k.type||!A.autoplayVideo){c=0;if("hero-image"===k.type){c=n(k.color,k.variant);if(-1===c)return;c=-1!==c?c:0}var g=e+c;g>=f&&(c=0,g=e);e=d.getHeroImageHash(A,k.color,c);-1!==e&&(M.dispatch("updateModel",{data:{index:c,thumbnailIndex:g,variant:e.variant,type:"hero-image"}}),e=b.find(".item").get(g),m.selectGivenThumbnail(l(e),b))}}}function v(d,e,f){if("hero-video"===H.getCurrentItem().type)return d;e=A.heroImage&&A.heroImage[e];var c=d;m.isDefined(e)&&(l.each(e,function(c,e){d<A.maxAlts&&(m.createThumbnail({type:"hero-image",
index:c,thumbnailIndex:d,variant:e.variant},e.thumb,b,"imageThumbnail"),d++)}),y(b,c,d,f));return d}function n(b,d){var e=A.heroImage;if(1>e.length||!m.isDefined(e[b])||!m.isDefined(d))return-1;var c=-1;l.each(e[b],function(b,e){e.variant===d&&(c=b)});return c}function k(){if(r.length&&A.repositionHeroImage){var b=d.getHeroDimParams(A,H.getCurrentItem()),e;m.isDefined(b)&&(e=m.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px ",r.css({"background-position":e,"background-size":b.width+
"px "+b.height+"px ","max-width":b.width+"px ","min-height":b.height+"px ",filter:"","-ms-filter":""}))}}function e(b,e,f,c){if(r.length&&b&&e){if("function"===typeof f||c){var k=new Image;k.onload=c?function(){r.css("background-image",'url("'+b+'")')}:f;k.src=b}f=e[1];var k=e[0],g;c||r.css({"background-image":'url("'+b+'")'});A.repositionHeroImage&&(e=d.getHeroDimParams(A,H.getCurrentItem(),e),m.isDefined(e)&&(f=e.width,k=e.height,g=m.isDefined(e.xPos)?e.xPos+"px "+e.yPos+"px ":"center "+e.yPos+
"px "));r.css({"background-position":g,"background-size":f+"px "+k+"px ","max-width":f+"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function K(b,f,k,c){b=d.getHeroImageHash(A,b,f);if(-1===b)return-1;f=l.map(b.main,function(c,b){return b})[0];e(f,b.main[f],k,c)}function D(b,e,f){if("hero-image"!==b.type)return-1;var c=n(b.color,H.getCurrentItem().variant),c=-1!==c?c:0;if(-1===d.getHeroImageHash(A,b.color,c))return-1;var k=H.getCurrentItem();b.thumbnailIndex=k.thumbnailIndex;b.type=k.type;
b.variant=k.variant;b.index=c;J(b,e,f)}function J(b,e,k){var c=d.getHeroImageHash(A,b.color,b.index),g;g=b&&E&&f.equals(b,E)?!0:!1;E||(E=b);if(!g&&b||e)K(b.color,b.index,e,k),E=b;r.removeClass("hide-background");f.trigger("dp:image-block:update",c)}var F,A,H,M,b,r,E={};return function(d,e,f,c){F=this;A=d;H=e;M=c;A.heroImage[A.landingAsinColor]=A.heroImage[A.defaultColor];F.render=function(c,d,e,f,a,k,h){b=f;r=l("#heroImage");c=v(d,c,k);D(H.getCurrentItem(),h,k);return c};F.update=function(c){var d=
c.data;"ingress"!==d.type&&r.addClass("hide-background");"swatchHover"===c.type?c.captured||(d.type=H.getCurrentItem().type,-1!==D(d)&&(c.captured=!0)):"hero-image"===d.type&&(J(d),"click"!==c.type&&A.usePeekHover||m.selectGivenThumbnail(c.$declarativeParent,b))};M.register("resize",k)}});"use strict";C.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(f,l,m,d,g){var y,v,n,k;return function(d,g,l,J){y=this;v=d;n=J;y.render=
function(d,e,g,l,b,n,D){k=l;y=this;g=v.maxAlts;l=e;b=v.colorImages[d]?v.colorImages[d].length:0;b+=m.getVideosCount(d,v);d=v.heroImage[d];n=0;d&&(n=d.length);d=b+n;d>g&&(g=d-g,d=k.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),g+="+",l={type:"ingress",index:0,thumbnailIndex:e,variant:""},d.find("#altIngressText").append(g),f.declarative.create(d,"thumb-action",l),k.append(d),l=e++);return l};y.update=function(d){"ingress"===d.data.type&&
"click"===d.type&&n.dispatch("imageClick",d)}}});"use strict";C.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(f,l,m){return function(d,f,l){this.getImageHash=function(f){var g=l.getCurrentItem();f=m.getIndexForVariant(g.color,f||"MAIN",d);return m.getImageHash(g.color,f,d)};this.onImageUpdateForTwister=function(d){f.register("updateSelection",function(f){"swatchClick"===f.type&&"function"===typeof d&&d()})}}});"use strict";C.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",
function(f,l,m){function d(d,f){var k;if(f.repositionHeroImage){k=d[1];var e=d[0];if(768>=(y.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))k*=.7,e*=.7;else{var g=((y.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,g=Math.max(Math.min(g,1),0);k*=.7+.3*g;e*=.7+.3*g}k=[k,e]}return k}function g(d,f,k){var e;if(k.repositionHeroImage){var g=y.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;k=k.heroFocalPoint;
if(m.isDefined(k)){e=Math.max((g-Math.min(1500,d))/2,0);var l=Math.max((g-d)/2,0);e-=l;g=Math.max(Math.min(g,1500),1024);e=e+(g-420-23)/2-d/f[1]*k}}return e}function C(d,f,g){d=d.heroImage;return!(m.isDefined(d)&&m.isDefined(d[f])&&m.isDefined(d[f][g])&&m.isDefined(d[f][g].main))||1>l.map(d[f][g].main,function(d,f){return f}).length?-1:d[f][g]}return{getHeroImageHash:C,getHeroDimParams:function(f,n,k){if(f.repositionHeroImage){if(!m.isDefined(k)){k=C(f,n.color,n.index);if(-1===k)return;n=l.map(k.main,
function(d,f){return f})[0];k=k.main[n]}n=d(k,f);f=g(n[0],k,f);return{height:n[1],width:n[0],xPos:f,yPos:75}}}}});"use strict";C.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(f,l,m,d,g,C,v){function n(d,g){var k=f.copy(d);if(v.isDefined(d)&&d.length>g){try{for(var l=-1,m=0;m<d.length;m++){var n=d.charAt(m);if(" "===n||"."===n||"?"===n||";"===n||","===n||":"===n)l=m;if(m===g-4){k=d.substring(0,-1===l?m:l);break}}}catch(H){k=
d.substring(0,g-3)}k+="..."}return k}function k(d,f){var g=d.lastIndexOf(".");return d="_"===d.charAt(g-1)?d.substring(0,g-1)+f+d.substring(g):d.substring(0,g)+"."+f+d.substring(g)}return{getDimension:function(d,f){var g=parseInt(d.css(f),10);return isNaN(g)?0:g},attachTabSelectHandler:function(d,g){f.on("dp:ivTabs:"+d+":select",g)},attachTabDeselectHandler:function(d,g){f.on("dp:ivTabs:"+d+":deselect",g)},attachImmersiveViewResizeHandler:function(d){f.on("dp:image-block:immersive-view:resize",d)},
detachImmersiveViewResizeHandler:function(d){f.off("dp:image-block:immersive-view:resize",d)},attachImmersiveViewResetHandler:function(d){f.on("a:popover:afterHide:immersiveView",d)},hideTabHeading:function(d){l("#"+d).hide()},unhideTabHeading:function(d){l("#"+d).show()},addStyleCodeToURL:k,getResizedThumbnailURL:function(d,f){d=d.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");d=d.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");d=d.replace(/\._CB\d+_SS\d+_/,
"");var g="_AA50_";f&&(g+="FMpng_RI_");return k(d,g)},populateVariationSelection:function(d){if(v.isDefined(y.DetailPage)&&v.isDefined(y.DetailPage.StateController)){d.empty();var f=y.DetailPage.StateController.getState(),g=f.variation_label_order,k;for(k in g)if(g.hasOwnProperty(k)){var m=g[k],n=f.selected_variations[m],m=f.variation_display_labels[m];n&&l("\x3cdiv/\x3e").addClass("ivVariations").text(m+":"+n).appendTo(d)}}},populateTitle:function(d,f,g){d.attr("title",g.title);d.text(n(g.title,
f))},animateStageIn:function(d){d.animate({opacity:1},200)},animateStageOut:function(d,f){d.animate({opacity:.4},100,f)},logError:function(d,f,g,k){y.ueLogError&&y.ueLogError(k,{logLevel:d,attribution:f,message:g})}}});"use strict";C.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(f,l,m,d,g,y,v,n){function k(){var a=x.getCurrentItem().color;q=L.colorImages[a];z=L.heroImage[a];
Q=u=0;g.isDefined(z)&&(Q=z.length);g.isDefined(q)&&(u=q.length)}function e(a){return a.hiRes||a.large||a.main[a.main.length-1]}function C(){var a=c.find("#ivStage").find("#ivLargeImage"),b=a.width(),d=a.height(),f=a.find(".fullscreen");f.removeAttr("style");var e=f.width(),h=f.height();0<f.length&&(f[0].naturalWidth&&(e=f[0].naturalWidth),f[0].naturalHeight&&(h=f[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,h=0===h?1:h,g=Math.min(b/e,d/h),k=h*g,l=e*g;1>g?(p?a.css("cursor","url('"+L.staticImages.zoomIn+
"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),G=!0):G=!1;e=Math.min(l,e);h=Math.min(k-20,h);f.css({"margin-top":(d-h)/2,"margin-left":(b-e)/2,height:h,width:e});a.css("visibility","visible");P=!1}function D(a){var b=c.find("#ivLargeImage");b.css("visibility","hidden");b.empty();n.animateStageIn(b);b.append(a);C()}function J(b){c.find("#ivLargeImage").css("display","none");c.find("#ivLargeImage").css("display","block");var f;"hero-image"===
b?g.isDefined(z)&&(f=e(z[a.index])):g.isDefined(q)&&(f=e(q[a.index]));if(g.isDefined(f)){c.find(".fullscreen").remove();var h=d("\x3cimg\x3e").attr("src",f).addClass("fullscreen"),k=c.find("#ivLargeImage");n.animateStageOut(k,function(){h.load(function(){D(h)});if(h[0].complete)D(h);else{k.empty();var a=(k.height()-104)/2,c=(k.width()-80)/2;d("\x3cimg\x3e").attr("src",L.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(k)}})}}function F(b){c.find(".ivThumb").removeClass("selected");
b.addClass("selected");b.hasClass("ivHeroImage")?a.type="hero-image":a.type="image";a.index=b.attr("id").split("_")[1];J(a.type);v.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(a.index,10)+1)+"_"+(Q+u))}function A(){c.delegate(".ivThumb","click",function(){var a=d(this);F(a)})}function H(a,c){return 0<c?c/2:Math.min(0,Math.max(c,a))}function M(a){var b=R.top-(a.pageY-Z[1])*Y;a=H(R.left-(a.pageX-Z[0])*Y,I.left);b=H(b,I.top);c.find(".fullscreen").css({left:a,top:b})}function b(){c.delegate("#ivLargeImage",
"click",function(a){if(P)C();else if(G){c.find(".fullscreen").removeAttr("style");if(G){var b=c.find("#ivLargeImage"),d=b.find(".fullscreen");p?b.css("cursor","url('"+L.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));P=!0;var f=c.find("#ivLargeImage");I.left=f.width()-d.width();I.top=f.height()-d.height();var f=b.height()/2,e=b.width()/2;Z=[b.offset().left+e,b.offset().top+f];R.top=f-d.height()/2;R.left=e-d.width()/2;
d.css({position:"relative",left:R.left,top:R.top});Y=Math.max(d.height()/b.height(),d.width()/b.width())}M(a);v.postCountMetric("dpcc_iv_largeImageCLick")}});c.delegate("#ivLargeImage","mousemove",function(a){P&&M(a)})}function r(){c.find("#ivLargeImage").empty()}function E(b){if(h){c=d("#ivMain");k();a=x.getCurrentItem();n.populateTitle(c.find("#ivTitle"),160,L);n.populateVariationSelection(c.find("#ivVariationSelection"));b=c.find("#ivThumbs");b.find(".ivRow").not(".placeholder").remove();for(var f=
Q+u,e=0,l=0;e<f;)for(var m=b.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(b),p=0;4>p&&e<f;p++,e++,l++)if(l<Q){var r=z[e].thumb,A=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+e).appendTo(m);A.find(".ivThumbImage").css("background",'url("'+n.getResizedThumbnailURL(r)+'") center no-repeat')}else l>=Q&&l<u+Q&&(r=q[e-Q].thumb,A=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+
(e-Q)).appendTo(m),A.find(".ivThumbImage").css("background",'url("'+n.getResizedThumbnailURL(r)+'") center no-repeat'));T();h=!1}b=d("#ivImagesTab").height();c.css("height",b);f=c.find("#ivTitle").outerHeight(!0);e=c.find("#ivVariationSelection").outerHeight(!0);l=c.find("#ivThumbs");m=n.getDimension(l,"margin-top")+n.getDimension(l,"margin-bottom");l.css("height",b-f-e-m);c.find("#ivLargeImage").css("height",b);b=c.find("#ivStage");f=c[0]&&c[0].getBoundingClientRect&&Math.floor(c[0].getBoundingClientRect().width)||
c.width();b.css("width",f-n.getDimension(c,"padding-left")-n.getDimension(c,"padding-right")-c.find("#ivThumbColumn").width()-n.getDimension(b,"margin-left")-n.getDimension(b,"margin-right"));a=x.getCurrentItem();b="hero-image"===a.type?c.find("#ivHeroImage_"+a.index):"image"===a.type?c.find("#ivImage_"+a.index):g.isDefined(z)?c.find("#ivHeroImage_"+a.index):c.find("#ivImage_"+a.index);g.isjQueryObjDefined(b)||(b=c.find("#ivImage_0"));F(b)}var w,L,x,c,z,q,Q,u,a,p=navigator.userAgent.match(/msie|trident/i),
h=!0,P=!1,G=!1,I={},R={},Y,Z,h=!0,T=f.once(function(){A();b();n.attachImmersiveViewResizeHandler(E);n.attachTabDeselectHandler("ivImagesTab",r)});return function(a,b,c,f){w=this;L=a;x=b;w.render=function(a,b,c,f,e,g){h=!0;k();0===Q+u?n.hideTabHeading("ivImagesTabHeading"):n.unhideTabHeading("ivImagesTabHeading");1===Q+u?d("#ivThumbs").hide():d("#ivThumbs").show()};w.update=function(a){};n.attachTabSelectHandler("ivImagesTab",E)}});"use strict";C.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils",
"ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(f,l,m,d,g,C,v,n,k,e){function K(){x.delegate(".ivThumb","click",function(){var a=d(this);x.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(c.type="chromeful-video",c.index=a.attr("id").split("_")[1])})}function D(){var a=d("#ivVideosTab").height();x.css("height",a);var b=x.find(".vse-video-block");
q=a-n.getDimension(x,"padding-top")-n.getDimension(x,"padding-bottom");b.css({"max-height":a,overflow:"hidden"});if(P)x.css({"max-width":Math.floor(1.77*q)});else{var a=x.find(".vse-airy-container"),b=x.find(".vse-ib-metadata"),c=Math.floor(q-n.getDimension(b,"height")),f=Math.floor(1.77*c);a.css({"max-height":c,"max-width":f});b.css("max-width",f);G&&(a=x.find(".vse-vertical-scroll"),b=n.getDimension(a,"margin-top")+n.getDimension(a,"margin-bottom"),a.css("max-height",q-b))}}function J(){F();z&&
z.pause();I=!1;p=!0;a=null}function F(){I=!1;z&&z.pause()}function A(g){a=g.clickTimeStamp;h&&(e.get(f,"#ivVideoBlock",L,T,ea),x=d("#ivVideoBlock"),w.getCurrentItem(),c=w.getCurrentItem(),R());D();I=!0;h=!1;b()}function H(a){h&&(x=d("#ivVideoBlock"),w.getCurrentItem(),c=w.getCurrentItem(),R());I&&b();D()}function M(a){z=a.airy;I&&z.play({isAsync:!0})}function b(){if(z&&(z.play({isAsync:!0,eventTimestamp:a||(new Date).getTime()}),v.postCountMetric("dpcc_vse_videoBlock_video_played"),p)){var b=y.ue;
b&&(b=b.count("dpcc_vse_videoingressclick"),b=(new Date).getTime()-b,v.postTimeMetric("dpcc_vse_vitff",b),p=!1)}}var r,E,w,L,x,c,z,q,Q,u,a,p=!0,h=!0,P=!1,G=!1,I=!1,R=f.once(function(){K();n.attachImmersiveViewResizeHandler(H);n.attachTabDeselectHandler("ivVideosTab",F);n.attachImmersiveViewResetHandler(J)}),Y=function(a,b,c){d("#ivVideoBlockSpinner").addClass("aok-hidden");v.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+b.placement);a=w.getCurrentItem().color;a=g.getVideoHash(a,0,E);z||(z=
g.createAiryInstanceForChromeful(d("#ivVideoBlock"),a,E.airyConfig,"ImmersiveView"));P=!0;d("#ivVideoBlock").css({"max-width":1.77*q,margin:"0 auto"});I&&P&&z.play({isAsync:!0})},Z=function(a,b,c){h||e.get(a,"#ivVideoBlock",L,T,ea);d("#ivVideoBlockSpinner").addClass("aok-hidden")},T=function(a,c,d){G=!0;D();I&&b()},ea=function(a,b,c){v.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,b,c,d){r=this;E=a;w=b;r.render=function(a,
b,c,d,e,l){a=w.getCurrentItem().color;b=g.getVideoHash(a,0,E);Q=E.colorToAsin[a]&&E.colorToAsin[a].asin;Q=g.isDefined(Q)?Q:E.mediaAsin;u=null!==E.vseVideoDataSourceTreatment&&"T1"===E.vseVideoDataSourceTreatment?"ASIN":"physicalID";h=!0;-1===b?n.hideTabHeading("ivVideosTabHeading"):(n.unhideTabHeading("ivVideosTabHeading"),L={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:b.marketPlaceID,locale:b.languageCode,product:{contentID:Q,contentIDType:"ASIN"},video:{contentID:b.mediaObjectId,
contentIDType:u,videoURL:b.url,imageURL:b.slateUrl},requestId:E.dpRequestId,metadata:{ProductTitle:E.title}},k.get(f,"#ivVideoBlock",L,Z,Y))};r.update=function(a){};n.attachTabSelectHandler("ivVideosTab",A);f.on("vseAiry",M)}});"use strict";C.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(f,l,m,d,g,y,v,n,k){function e(){var a=d("#iv360Tab").height();G.css("height",
a);var b=G.find("#ivTitle360").outerHeight(!0),c=G.find("#ivVariationSelection360").outerHeight(!0),f=G.find("#ivThumbs360"),e=k.getDimension(f,"margin-top")+k.getDimension(f,"margin-bottom");f.css("height",a-b-c-e);a=G.find("#ivStage360");b=G[0]&&G[0].getBoundingClientRect&&Math.floor(G[0].getBoundingClientRect().width)||G.width();a.css("width",b-k.getDimension(G,"padding-left")-k.getDimension(G,"padding-right")-G.find("#ivThumbColumn360").width()-k.getDimension(a,"margin-left")-k.getDimension(a,
"margin-right"))}function C(){A();var a=G.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});k.animateStageIn(a)},200);D()}function D(){if(0<V){var a=G.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function J(a,b){if(V<a.length){var c=d("\x3cimg /\x3e").css({display:"block",width:6*R+"px",height:Y+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(V++,1===V&&(D(),0<la&&(v.time("dppc_loadTime360",
Date.now()-la,h.mediaAsin),n.postTimeMetric("dppc_loadTime360",Date.now()-la))),0<da&&(v.time("dppc_perSpriteloadTime360",Date.now()-da,h.mediaAsin),n.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-da)),G.find("#iv360Spinner").hide(),c.show(),ca=5*I.imageLocations[Math.floor(aa/I.imageLocations[0].length)][aa%I.imageLocations[0].length],J(a,b))};c.attr("src",a[V].replace(/(\._SP)\d+(,)\d+/,"$1"+T+"$2"+Z));da=Date.now()}}function F(a){if(g.isDefined(I.spriteWidthSizes)&&0<I.spriteWidthSizes.length){var b=
I.spriteWidthSizes,c=b.length,d=b[0],f=b[c-1];if(a<=d)return d;if(a>f)return f;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function A(){var a=G.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),d("\x3cimg\x3e").attr("src",
h.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ka=!0,H())}function H(){if(g.isDefined(I.spriteURLs)&&g.isDefined(G)&&ka&&!fa){var a=G.find("#ivLarge360"),c=d("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});g.isDefined(I.staticImages.hint360)&&d("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",
I.staticImages.hint360).appendTo(c);d("\x3cdiv\x3e").css({"text-align":"center"}).text(h.staticStrings.dragToSpin).appendTo(c);c.appendTo(a);var c=I.imageWidth,f=I.imageHeight,e=a.parent().width(),k=a.parent().height(),l=0,m=0;c/f>e/k?(T=F(e),Z=Math.round(f/c*T),R=Math.ceil(e),Y=Math.ceil(Z/T*e),m=(k-Y)/2):(Z=F(k),T=Math.round(c/f*Z),Y=Math.ceil(k),R=Math.ceil(T/Z*k),l=(e-R)/2);a.css({"margin-left":l,"margin-top":m,width:R+"px",height:Y+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",
6*R+"px");J(I.spriteURLs,G.find("#image-360-sprites"),0);c=G.find("#ivLarge360");c.bind("mousedown",E);c.bind("touchstart",M);c.bind("touchmove",b);c.bind("touchend",r);d(document).bind("mousemove",w);d(document).bind("mouseup",L);g.isDefined(h.staticImages.grab)&&a.css("cursor","url('"+h.staticImages.grab+"'), auto");fa=!0}}function M(a){B=!0;ha=a.originalEvent.targetTouches[0].clientX}function b(a){B&&(x(a.originalEvent.targetTouches[0].clientX-ha),ha=a.originalEvent.targetTouches[0].clientX)}function r(a){B&&
(B=!1)}function E(a){U=!0;ea=a.originalEvent.clientX;g.isDefined(h.staticImages.grabbing)&&(a=G.find("#ivLarge360"),a.css("cursor","url('"+h.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+h.staticImages.grabbing+"'), auto"));return!1}function w(a){U&&(x(a.originalEvent.clientX-ea),ea=a.originalEvent.clientX)}function L(a){U&&(U=!1,g.isDefined(h.staticImages.grab)&&(a=G.find("#ivLarge360"),a.css("cursor","url('"+h.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"auto")))}function x(a){ca-=a/R*180;ia&&(v.count("dppc_360dragToSpin",h.mediaAsin),n.postCountMetric("dppc_360dragToSpin"));ia=!1;for(a=ca;0>a;)a+=360;for(;360<a;)a-=360;ca=a;var b;a=360;for(var c=0;c<V;c++)for(var d=0;d<I.imageLocations[c].length;d++){var f=Math.abs(ca-5*I.imageLocations[c][d]);f<a&&(a=f,b=c*I.imageLocations[0].length+d)}b!==aa&&(a=Math.floor(b/I.imageLocations[0].length),a!==Math.floor(aa/I.imageLocations[0].length)&&(g.isDefined(pa)||(pa=document.createElement("canvas").getContext("2d")),
c=G.find("#image-360-sprites").children(),pa.drawImage(c[a],0,0)),a=G.find(".iv360Hint").not(".iv360HintFaded"),g.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));aa=b;a=b%I.imageLocations[0].length*-1*R;b=-1*Math.floor(b/I.imageLocations[0].length)*Y;c=G.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function c(){if(ga){G=d("#ivMain360");var a=P.getCurrentItem().color;
q()&&Q(a);I=q()?h.spin360ColorData[a]:void 0;k.populateTitle(G.find("#ivTitle360"),160,h);k.populateVariationSelection(G.find("#ivVariationSelection360"));G.find("#ivLarge360").empty();V=0;fa=ka=!1;aa=ca=0;na();ga=!1}0!==d("#iv360Tab").height()&&(k.detachImmersiveViewResizeHandler(c),e(),C(),la=Date.now(),t=ia=!0,v.count("dppc_click360",h.mediaAsin),n.postCountMetric("dppc_click360"))}function z(a){var b=h.colorToAsin[a],c={},d=500;if(!b||!b.asin)if(a===h.defaultColor)b={asin:h.winningAsin};else return;
c.params={asin:b.asin};var f="360"+b.asin,e=Date.now();c.success=function(b){v.time("dppc_asyncRequestTime360",Date.now()-e,h.mediaAsin);n.postTimeMetric("dppc_asyncRequestTime360",Date.now()-e);b&&g.isDefined(b.spin360.spin360Model)?(g.ajaxState(f,"success"),h.spin360ColorData[a]=b.spin360.spin360Model,a===P.getCurrentItem().color&&(I=h.spin360ColorData[a],H())):c.error()};c.error=function(){v.count("dppc_asyncFailed360",h.mediaAsin);n.postCountMetric("dppc_asyncFailed360");v.time("dppc_asyncRequestTime360",
Date.now()-e,h.mediaAsin);n.postTimeMetric("dppc_asyncRequestTime360",Date.now()-e);d*=2;16E3>=d?setTimeout(function(){e=Date.now();y.load("/gp/product/features/apparel-main-image/360.html",c)},d):g.ajaxState(f,"fail")};g.ajaxState(f)&&"fail"!==g.ajaxState(f)||(y.load("/gp/product/features/apparel-main-image/360.html",c),g.ajaxState(f,"sent"))}function q(){return g.isDefined(h.spin360ConfigEnabled)&&h.spin360ConfigEnabled}function Q(a){return g.isDefinedAndNotEmpty(h.spin360ColorData[a])?!0:h.spin360ColorEnabled.hasOwnProperty(a)?
h.landingAsinColor===h.defaultColor?u():h.spin360ColorEnabled[a]:u()}function u(){return g.isDefined(h.spin360LazyLoadEnabled)&&h.spin360LazyLoadEnabled}function a(){t&&(v.time("dppc_duration360",Date.now()-la,h.mediaAsin),n.postTimeMetric("dppc_duration360",Date.now()-la),t=!1)}var p,h,P,G,I,R,Y,Z,T,ea,ha,ka=!1,fa=!1,ca=0,aa=0,la=0,da=0,U=!1,B=!1,V=0,pa,ia=!0,t=!1,ga=!0,na=f.once(function(){k.attachImmersiveViewResizeHandler(c);k.attachImmersiveViewResizeHandler(e);k.attachImmersiveViewResetHandler(a);
k.attachTabDeselectHandler("iv360Tab",a)});return function(a,b,e,l){p=this;h=a;P=b;q()&&!u()&&(h.spin360ColorData[h.landingAsinColor]=h.spin360ColorData[h.defaultColor],h.spin360ColorEnabled[h.landingAsinColor]=h.spin360ColorEnabled[h.defaultColor]);g.isDefined(h.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",k.addStyleCodeToURL(h.staticImages.icon360,"_FMpng_RI_"));p.render=function(a,b,c,e,l,m){if(a===h.landingAsinColor||h.spin360ColorEnabled.hasOwnProperty(a))return ga=
!0,q()&&Q(a)?(g.isUndefinedOrEmpty(h.spin360ColorData[a])&&(h.spin360ColorData[a]={},z(a)),d("#ivThumbs360").hide(),k.unhideTabHeading("iv360TabHeading")):k.hideTabHeading("iv360TabHeading"),g.isImmersiveViewEnabled(h,P.getCurrentItem().color)&&q()&&Q(a)&&(b===h.maxAlts&&(a=e.find(".item.imageThumbnail"),c=e.find(".item.videoThumbnail"),g.isDefined(c)&&1<c.length?c.last().remove():a.last().remove(),b--),a=e.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
f.declarative.create(a,"button-360-click"),e.append(a),b++,v.count("dppc_display360",h.mediaAsin),n.postCountMetric("dppc_display360")),b};p.update=function(a){};k.attachTabSelectHandler("iv360Tab",c)}});C.register("nexusLogger360",function(){return{count:function(f,l){y.ue&&y.ue.event({asin:l,metricName:f,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(f,l,m){y.ue&&y.ue.event({asin:m,metricName:f,metricValue:l},"hit-360","hit360.clientEvent.3")}}});"use strict";C.when("postMetric",
"imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(f,l){try{var m=y.location.host,d={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},g=m.split(".")[1],N=-1===m.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==d[g]?d[g]:"https://www.amazon.com/vap/ew/",v="vse_lazyLoaderHook:success:",n="vse_lazyLoaderHook:error:",k="vse_preLoaderHook:success:",e="vse_preLoaderHook:error:",K=4E3,D=3}catch(J){l.logError("FATAL","vse_ns_desktop","[Domain] ",J)}C.register("vse_ns_preLoaderHook",
function(){function d(g,m){try{var n=g.A,b=g.block,r=g.request,v=g.handleFailure,w=g.handleSuccess,y=n.$;m--;var x=D-m-1,c=n.now();n.ajax(N+"componentbuilder",{params:r,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:r.timeout||K,withCredentials:!0,success:function(d){var e=n.now()-c;f.postTimeMetric(k,e);f.postCountMetric(k+r.page+":"+r.placement+":"+x);y(b).html(d);w(n,r,d)},error:function(b){f.postCountMetric(e+r.page+":"+r.placement+":"+x);(0===b.http.status||
500<=b.http.status&&599>=b.http.status)&&0<m?d(g,m):(f.postCountMetric(e,1),v(n,r,b))}})}catch(z){l.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",z)}}return{get:function(f,e,g,b,k){d({A:f,block:e,request:g,handleFailure:k,handleSuccess:b},D)}}});C.register("vse_ns_lazyLoaderHook",function(){function d(e,g,k){try{var b=e.A,m=e.context,y=e.handleFailure,w=e.handleSuccess;g.attr("data-configuration");var C=atob(g.attr("data-configuration")),x=JSON.parse(C),c={pageContext:m,configuration:x},
z=b.now();k--;var q=D-k-1;b.ajax(N+"subcomponent/"+x.type,{params:c,paramsFormat:"json",method:"post",contentType:"application/json",timeout:m.timeout||K,withCredentials:!0,success:function(d){var a=b.now()-z;f.postTimeMetric(v,a);f.postCountMetric(v+m.page+":"+m.placement+":"+x.type+":"+q);g.html(d);w(b,c,d)},error:function(l){f.postCountMetric(n+m.page+":"+m.placement+":"+x.type+":"+q);(0===l.http.status||500<=l.http.status&&599>=l.http.status)&&0<k?d(e,g,k):(f.postCountMetric(n,1),y(b,c,l))}})}catch(J){l.logError("FATAL",
"vse_ns_desktop","[vse_ns_lazyLoaderHook] ",J)}}return{get:function(e,f,g,b,k){var l=e.$;l(f+" div[data-configuration]").each(function(){d({A:e,context:g,handleFailure:k,handleSuccess:b},l(this),D)})}}})})});